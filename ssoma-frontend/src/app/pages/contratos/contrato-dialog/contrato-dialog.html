<h2 mat-dialog-title>{{ mode === 'crear' ? 'Nuevo Contrato' : 'Editar Contrato' }}</h2>

<mat-dialog-content>
  <div class="dialog-content">

    <!-- Número de Contrato -->
    <div class="form-group">
      <label>Número de Contrato *</label>
      <input type="text"
             [(ngModel)]="contrato.numero_contrato"
             placeholder="Ej. OC-2024-001 o OS-2024-001"
             class="form-input">
    </div>

    <!-- Fila 2: Descripción (full width) -->
    <div class="form-group">
      <label>Descripción *</label>
      <textarea
             [(ngModel)]="contrato.descripcion"
             placeholder="Descripción del contrato"
             rows="3"
             class="form-input"></textarea>
    </div>

    <!-- Fila 3: Empresa Proveedora (full width) -->
    <div class="form-group">
      <label>Empresa Proveedora *</label>
      <select [(ngModel)]="contrato.empresa_id" (ngModelChange)="onEmpresaChange()" class="form-input">
        <option [value]="0">Seleccione una empresa</option>
        <option *ngFor="let empresa of empresas" [value]="empresa.id">
          {{ empresa.razonSocial }}
        </option>
      </select>
    </div>

    <!-- Fila 4: Fecha Inicio y Fecha Fin -->
    <div class="form-row">
      <div class="form-group">
        <label>Fecha Inicio *</label>
        <input type="date"
               [(ngModel)]="contrato.fecha_inicio"
               class="form-input">
      </div>

      <div class="form-group">
        <label>Fecha Fin *</label>
        <input type="date"
               [(ngModel)]="contrato.fecha_fin"
               class="form-input">
      </div>
    </div>

    <!-- Fila 5: Nivel de Riesgo y Administrador -->
    <div class="form-row">
      <div class="form-group">
        <label>Nivel de Riesgo</label>
        <select [(ngModel)]="contrato.nivel_riesgo" class="form-input">
          <option value="BAJO">BAJO</option>
          <option value="MEDIO">MEDIO</option>
          <option value="ALTO">ALTO</option>
        </select>
      </div>

      <div class="form-group">
        <label>Administrador del Contrato</label>
        <input type="text"
               [(ngModel)]="contrato.admin_contrato_kallpa"
               placeholder="Ing. Juan Pérez"
               class="form-input">
      </div>
    </div>

  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancelar()">Cancelar</button>
  <button mat-raised-button color="primary" (click)="guardar()">
    {{ mode === 'crear' ? 'Crear' : 'Guardar' }}
  </button>
</mat-dialog-actions>
