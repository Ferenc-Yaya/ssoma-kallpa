<div class="main-layout">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="sidebarCollapsed">
    <div class="sidebar-header">
      <div class="logo" *ngIf="!sidebarCollapsed">
        <h2>KALLPA</h2>
        <p>SSOMA</p>
      </div>
      <button mat-icon-button (click)="toggleSidebar()" class="toggle-btn">
        <mat-icon>{{ sidebarCollapsed ? 'menu' : 'menu_open' }}</mat-icon>
      </button>
    </div>

    <!-- Menú dinámico basado en roles -->
    <nav class="sidebar-nav">
      <a *ngFor="let item of menuItems"
         [routerLink]="item.route" 
         routerLinkActive="active"
         class="nav-item"
         [matTooltip]="item.label"
         [matTooltipDisabled]="!sidebarCollapsed"
         matTooltipPosition="right">
        <mat-icon>{{ item.icon }}</mat-icon>
        <span *ngIf="!sidebarCollapsed">{{ item.label }}</span>
      </a>
    </nav>

    <!-- Footer del sidebar con rol -->
    <div class="sidebar-footer" *ngIf="!sidebarCollapsed">
      <div class="user-rol-badge">
        <mat-icon>{{ userRole === 'SUPER_ADMIN' ? 'admin_panel_settings' : 
                     userRole === 'ADMIN_EMPRESA_PRINCIPAL' ? 'business_center' : 
                     'work' }}</mat-icon>
        <span>{{ getRolLabel() }}</span>
      </div>
    </div>
  </aside>

  <!-- Contenido principal -->
  <div class="main-content">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <app-breadcrumbs></app-breadcrumbs>
      </div>
      <div class="header-right">
        <!-- Campana de notificaciones -->
        <!-- <app-notificaciones></app-notificaciones> -->
        
        <div class="user-info">
          <div class="user-details">
            <span class="user-name">
              <mat-icon>person</mat-icon>
              {{ username || 'Usuario' }}
            </span>
            <span class="user-rol" *ngIf="getRolLabel()">
              {{ getRolLabel() }}
            </span>
          </div>
        </div>
        <button mat-raised-button (click)="logout()" class="btn-logout">
          <mat-icon>logout</mat-icon>
          Salir
        </button>
      </div>
    </header>

    <!-- Área de contenido -->
    <div class="content-area">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>