<div class="acreditacion-lista-page">
  <div class="page-header">
    <h1>
      <mat-icon>verified_user</mat-icon>
      Acreditación de Contratos
    </h1>
    <p>Revisa y aprueba los documentos de cada contrato</p>
  </div>

  <div class="contratos-grid">
    <mat-card class="contrato-card" *ngFor="let contrato of contratos" (click)="abrirAcreditacion(contrato.contrato_id)">
      <mat-card-header>
        <mat-card-title>
          {{ contrato.numero_contrato }}
        </mat-card-title>
        <mat-card-subtitle>
          {{ contrato.empresa_nombre }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="descripcion">{{ contrato.descripcion }}</p>

      <div class="badges">
        <div class="custom-chip chip-riesgo" [style.background-color]="getNivelRiesgoColor(contrato.nivel_riesgo)">
          Riesgo: {{ contrato.nivel_riesgo }}
        </div>
        <div class="custom-chip chip-estado" [style.background-color]="getEstadoColor(contrato.estado_acreditacion)">
          {{ contrato.estado_acreditacion }}
        </div>
      </div>

        <div class="progreso-info">
          <div class="progreso-numeros">
            <span class="aprobados">✓ {{ contrato.progreso.docs_aprobados }}</span>
            <span class="rechazados">✗ {{ contrato.progreso.docs_rechazados }}</span>
            <span class="pendientes">⏱ {{ contrato.progreso.docs_pendientes }}</span>
          </div>
          <div class="progreso-barra">
            <div class="barra-completa">
              <div class="barra-progreso" [style.width.%]="contrato.progreso.porcentaje"></div>
            </div>
            <span class="progreso-texto">{{ contrato.progreso.porcentaje }}%</span>
          </div>
        </div>

        <div class="recursos-resumen">
          <div class="recurso-item">
            <mat-icon>people</mat-icon>
            <span>{{ contrato.personas.length }} Personas</span>
          </div>
          <div class="recurso-item">
            <mat-icon>directions_car</mat-icon>
            <span>{{ contrato.activos.length }} Activos</span>
          </div>
          <div class="recurso-item">
            <mat-icon>science</mat-icon>
            <span>{{ contrato.materiales.length }} MatPel</span>
          </div>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary">
          <mat-icon>assignment</mat-icon>
          Revisar Documentos
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="no-contratos" *ngIf="contratos.length === 0">
    <mat-icon>check_circle</mat-icon>
    <h2>No hay contratos pendientes de acreditación</h2>
    <p>Todos los contratos están completamente revisados</p>
  </div>
</div>